# 索引问题

二级索引存储主键值,而不是存储行指针优缺点

优点:

减少了出现行移动或者数据页分裂时二级索引的维护工作（当数据需要更新的时候，二级索引不需要修改，只需要修改聚簇索引，一个表只能有一个聚簇索引，其他的都是二级索引，这样只需要修改聚簇索引就可以了，不需要重新构建二级索引）

缺点:

1. 二级索引体积可能会变大，因为二级索引中存储了主键的信息
2. 二级索引的访问需要两次索引查找。第一次通过查找 二级索引 找二级索引中叶子节点存储的 主键的值；第二次通过这个主键的值去 聚簇索引 中查找对应的行
3. 其他观点

   ```text
   群友B（加锁角度）：这群友也是真的牛逼
    很简单，就是无法给物理地址加行级锁。
    尤其是做插入和更新的时候。因为无论是插入或更新时：数据会经历redo日志、缓冲池(update是buffer pool，insert则是另一个缓冲区)等步骤才得以落盘，而在落盘前，都无法保证二级索引记录的物理地址是否会被其它东西占用。
   ```

参考资料

- [MYSQL InnoDB二级索引存储主键值而不是存储行指针的优点与缺点](https://blog.csdn.net/bbsdsz/article/details/87917071)
- [级索引为什么不存储主键索引的物理地址](https://blog.csdn.net/qq_33347239/article/details/103903916)